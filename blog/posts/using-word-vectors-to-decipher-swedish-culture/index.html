<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Using word vectors to decipher Swedish culture | Tom's Data Science Blog</title>
<link href="../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://tomwhi.github.io/posts/using-word-vectors-to-decipher-swedish-culture/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Tom Whitington">
<link rel="next" href="../multilabel-classification-modified-loss/" title="More efficient labelling via a modified loss function" type="text/html">
<meta property="og:site_name" content="Tom's Data Science Blog">
<meta property="og:title" content="Using word vectors to decipher Swedish culture">
<meta property="og:url" content="https://tomwhi.github.io/posts/using-word-vectors-to-decipher-swedish-culture/">
<meta property="og:description" content='Intro
Can culture be quantified? Taking for example a statement like:
"Society has become more liberal over the years."
or
"In Sweden it is particularly important not to brag."
How do we know whether '>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-01-01T17:01:43+01:00">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
            styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
        <div class="sidebar-item">
          <img src="../../images/ProfilePic.png">
</div>
        
    <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="../../archive.html">Archive</a>
        <a class="sidebar-nav-item" href="../../categories/">Tags</a>
        <a class="sidebar-nav-item" href="../../rss.xml">RSS feed</a>
    
    
    </nav>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          
    <h3 id="brand" class="masthead-title">
      <a href="https://tomwhi.github.io/" title="Tom's Data Science Blog" rel="home">Tom's Data Science Blog</a>
    </h3>

        </div>
      </div>

      <div class="container content" id="content">
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="post-title p-name entry-title" itemprop="headline name"><a href="." class="u-url">Using word vectors to decipher Swedish culture</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Tom Whitington</span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="post-date published dt-published" datetime="2017-01-01T17:01:43+01:00" itemprop="datePublished" title="2017-01-01 17:01">2017-01-01 17:01</time></a></p>
                <p class="commentline">
    
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/word-embeddings-swedish-culture.html">Comments</a>


        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <h2>Intro</h2>
<p>Can culture be quantified? Taking for example a statement like:</p>
<p><em>"Society has become more liberal over the years."</em></p>
<p>or</p>
<p><em>"In Sweden it is particularly important not to brag."</em></p>
<p>How do we know whether these statements are accurate?</p>
<p>Such questions relating to culture often prove refractory to quantitative analysis. However, recent developments in natural language processing (NLP) are providing new avenues of investigation. For example, the development of high quality <a href="https://en.wikipedia.org/wiki/Word_embedding" target="_blank">word embeddings</a> provides a mechanism for quantifying the meaning of words, as derived from input text corpora.</p>
<p>Here, I present an attempt to use word vectors to analyse culture. In particular, I have analysed <a href="https://arxiv.org/abs/1301.3781" target="_blank">word2vec</a> word embeddings trained on English and Swedish wikipedia corpuses, to examine whether there are particular areas of expression that are enriched or depleted in one language compared to another.</p>
<p>Below, I explain the analysis. To skip straight to the nice meaty results, <a href="#results">click here</a>.</p>
<p><img alt="clusters aesthetic" src="../../images/WordVectors/All_Clusters_Aesthetic_v3.svg"></p>
<h2>Word2vec and machine translation</h2>
<p>Word2vec is very cool indeed. The method produces high dimensional word embeddings by training a neural network to predict words given their context, from an input text corpus. The resulting <a href="https://www.tensorflow.org/tutorials/word2vec/" target="_blank">word vectors</a> have interesting semantic properties. To take a famous example, if we take the vector for the word "King", subtract the vector for "man" and add the vector for "woman", we end up with a vector located close to the word "Queen".</p>
<p><a href="https://arxiv.org/abs/1309.4168" target="_blank">Mikolov <em>et al.</em></a> also found that the relative positioning of words in one language are preserved to some extent when taking their translations in a second language. The authors showed how this can facilitate machine translation of words: A <a href="https://en.wikipedia.org/wiki/Transformation_matrix" target="_blank">transformation matrix</a> can be trained, such that multiplication of a word vector in language <em>l</em><sub>query</sub> will result in a vector that is close (on average) to a suitable translation in language <em>l</em><sub>target</sub>.</p>
<p>This leads to my project. One could apply Mikolov's method to all words in language <em>l</em><sub>query</sub> such that they are comparable to words in language <em>l</em><sub>target</sub>. This would result in two word landscapes in high-dimensional space, which can themselves be compared for various properties. For example, one language may be enriched or depleted for specific areas of expression relative to another. I implemented this approach and used it to compare English and Swedish, with the aim of identifying interesting cultural differences.</p>
<h2>Implementing Mikolov <em>et al.</em>
</h2>
<p>The code I wrote for this project is available on <a href="https://github.com/tomwhi/nlp-stuff" target="_blank">GitHub</a>. I implemented the project as a series of small python scripts, which cobble together to form a <a href="https://github.com/tomwhi/nlp-stuff/blob/master/example_pipeline.sh" target="_blank">rough analysis pipeline</a>. I focused on completing the project, rather than on software engineering <em>per se</em>, so some of it is a bit rough and ready.</p>
<p>My work relies on the <a href="https://radimrehurek.com/gensim/" target="_blank">gensim</a> library, which includes amongst other things an implementation of the word2vec training algorithm. I found the library extremely intuitive and powerful.</p>
<p>I produced word vectors and a transformation matrix through the following steps:</p>
<ul>
<li>
<a href="https://github.com/tomwhi/nlp-stuff/blob/master/process_wiki.py" target="_blank">Processing</a> the wikipedia corpus for input to gensim, for both English and Swedish.</li>
<li>
<a href="https://github.com/tomwhi/nlp-stuff/blob/master/train_word2vec.py" target="_blank">Training</a> word2vec models using gensim, including short phrases in the vocabulary in addition to individual words.</li>
<li>
<a href="https://github.com/tomwhi/nlp-stuff/blob/master/filter_word2vec_on_vocab.py" target="_blank">Filtering</a> the resulting word vectors to only retain words in predefined English and Swedish vocabularies</li>
<li>
<a href="https://github.com/tomwhi/nlp-stuff/blob/master/run_microsoft_translation.py" target="_blank">Obtaining translations</a> for the most frequent words using the Microsoft translation API, to use for training the transformation matrix, and <a href="https://github.com/tomwhi/nlp-stuff/blob/master/retrieve_training_vectors.py">retrieving</a> corresponding word vector pairs.</li>
<li>
<a href="https://github.com/tomwhi/nlp-stuff/blob/master/derive_translation_matrix.py" target="_blank">Training</a> the transformation matrix, by implementing gradient descent with the loss function defined in <a href="https://arxiv.org/abs/1309.4168" target="_blank">Mikolov <em>et al.</em></a>:</li>
</ul>
<p><img alt="equation" src="../../images/WordVectors/Equation.png"></p>
<ul>
<li>Here, <em>W</em> is the translation matrix, <em>x</em><sub>i</sub> is the <em>i</em> th training word vector in the query language and <em>z</em><sub>i</sub> is the word vector for the corresponding translation. I used <a href="https://github.com/Theano/Theano" target="_blank">Theano</a> to implement the gradient descent in this step, and manually checked the partial derivatives on a small example matrix to make sure I got the same results as Theano (having not used Theano prior to this). I plotted the cost function with increasing training iterations in order to see how different training rates impacted the effectiveness of the gradient descent.</li>
<li>I then applied the transformation matrix to all Swedish word vectors to obtain corresponding vectors that are then comparable to the English word vectors.</li>
</ul>
<p>Inspecting some example words and their translations indicates that the translation works quite well, as illustrated by the shift in Swedish word vectors between Figure 1 and Figure 2:</p>
<p><em>Figure 1: Scatterplot showing a selection of English words (red) and their corresponding Swedish words (blue), connected by light grey lines, when the word vectors are projected onto the first two principal components derived from running <a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank">PCA</a> on the English word vectors:</em>
<img alt="PC plot 1" src="../../images/WordVectors/PC_Plot_English_Swedish.png"><sub><sup><em><strong>Technical note</strong>: Swedish word vectors can be projected onto the English principal components 1 and 2, as the Swedish and English word vectors just happen to be the same length (400 elements). This is done in figure 1 simply to contrast against their updated positions as shown in figure 2, after the translation matrix is applied.</em></sup></sub></p>
<p><em>Figure 2: When I multiply the Swedish word vectors with the translation matrix, the word vectors move much close to their respective English counterparts:</em>
<img alt="PC plot 2" src="../../images/WordVectors/PC_Plot_English_Swedish_Translated.png"></p>
<h2>Mitigating the "curse of dimensionality"</h2>
<p>Given word vectors for English and Swedish (translated to English word vector coordinates), I now set out to compare the languages based on the positioning of the word vectors in high dimensional space. This was by far and away the trickiest and most time-consuming aspect of the project, and I ended up trying a few different approaches to the problem.</p>
<p>To get optimal performance, word vectors are high dimensional (typically hundreds of dimensions). The high dimensionality of the resulting data can cause various <a href="https://en.wikipedia.org/wiki/Curse_of_dimensionality" target="_blank">problems</a>. In this project, data sparsity was a particular problem: I needed to find a way to compare the English and Swedish word vector landscapes in spite of the great sparsity of the word vector instances. Given 400 dimensions, a volume in that space will typically contain few word vectors.</p>
<p>I tried applying <a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank">PCA</a> and doing a comparison of word density in volumes defined by the resulting lower number of dimensions, and I tried out the <a href="https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding" target="_blank">t-SNE</a> method too.</p>
<p>My goal was to identify areas of linguistic expression enriched in one language relative to another, and so I eventually decided I should define clusters of words within similar meaning, and then analyse those on aggregate. To do this, I used gensim to find the <a href="https://github.com/tomwhi/nlp-stuff/blob/master/get_closest_words.py" target="_blank">closest</a> 100 English word vectors for each English word, as defined by <a href="https://en.wikipedia.org/wiki/Cosine_similarity" target="_blank">cosine similarity</a>. I then defined a <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics" target="_blank">graph</a>) of word similarity, with words as nodes and edges between nodes if the two words have cosine similarity &gt; 0.5. Taking this graph as input, I ran the <a href="http://www.mapequation.org/code.html" target="_blank">InfoMap tool</a> to detect clusters of highly interconnected words. For each of the word clusters, I also calculated the median cosine similarity value to the closest Swedish word, considering all words in the cluster.</p>
<p>Using this approach produced more robust results compared with an approach analysing individual words in isolation.</p>
<h2>Highly translatable words</h2>
<p>I consider the median Swedish cosine similarity to be a proxy for the <em>translatability</em> of a given word cluster - <em>i.e.</em> word clusters with a high score contain words that typically have a good translation, whilst word clusters with a low score contain words with mostly poor translations.</p>
<p>Looking at the clusters with highest translatability, we can see that the clusters deal with universal concepts that are not tethered to culture, including numbers, physical positioning, time, or physical actions, as shown in Figure 3.</p>
<p><em>Figure 3: Clusters of similar English words (red nodes) with high median cosine similarity of their closest Swedish translations (blue nodes), defined through use of InfoMap. Visualisation generated with <a href="https://gephi.org" target="_blank">Gephi</a>. Edges between English word nodes indicate cosine similarity &gt; 0.5, whereas an edge to a Swedish word node indicates the translation with highest cosine similarity for the given English word. The size of Swedish word nodes is scaled to the maximum observed cosine similarity score for that word. Note: The numeric values associated with the Swedish words are a technical artefact, and can be ignored.</em></p>
<p><img alt="NegCntrlClusters" src="../../images/WordVectors/NegCntrl_Clusters.png"></p>
<h2>
<a name="results"></a>Cultural insights: The Jantelagen and the Swagman</h2>
<p>Some of the clusters with low translatability scores reveal potentially cultural differences between Swedish- and English-speaking populations. I considered the clusters in the lowest 10% of translatability (72 clusters in total), and present illustrative examples here (more extensive results are presented in the <a href="#appendix">appendix</a>).</p>
<p>One unspoken rule underpinning Scandinavian societies is the <a href="https://en.wikipedia.org/wiki/Law_of_Jante" target="_blank">"Jantelagen"</a>. Under the Jantelagen, it is taboo to promote oneself as having greater merit or achievement compared to others. As such, it is perhaps no surprise that English words such as <em>eclipsed</em>, <em>surpassed</em>, <em>rivaled</em>, <em>bettered</em> and <em>outpaced</em> are difficult to translate to Swedish equivalents (Figure 4).</p>
<p><em>Figure 4: English words that appear to violate the Swedish Jantelagen (see Figure 3 caption for legend).</em></p>
<p><img alt="Jantelagen cluster" src="../../images/WordVectors/Jantelagen_cluster_v1.png"></p>
<p>Scandinavian societies are also famous for being highly egalitarian - a concept extending beyond the Jantelagen itself. My method identifies several relevant clusters of English words that are indeed not very egalitarian in tone. In Figure 5 we can see a cluster of words containing various occupations. Some of these arguably exist solely for rich people to flaunt their wealth - such as <em>butlers</em> or <em>valets</em>, and others might be considered old fashioned, such as <em>housekeepers</em> or <em>homemakers</em>. In a similar vein, words like <em>profiteering</em>, <em>mongering</em>, <em>debased</em>, and <em>bullish</em> seem to run counter to ideals of equality.</p>
<p><em>Figure 5: English words and concepts that run counter to egalitarianism.</em></p>
<p><img alt="Egalitarianism cluster" src="../../images/WordVectors/Egalitarianism_cluster_v1.png"></p>
<p>Figure 6 shows a cluster of morality-related verbs such as <em>sinned</em> and <em>transgressed</em>, and a cluster of nouns/adjectives relating to virtues, including <em>valour</em> and <em>gallantry</em>. These are concepts that vary from culture to culture; such ideas could be considered pompous or pious depending on your point of view.</p>
<p><em>Figure 6: English words relating to virtue concepts that translate poorly to Swedish.</em></p>
<p><img alt="Pomposity cluster" src="../../images/WordVectors/Pomposity_clusters_v1.png"></p>
<p>Various English word clusters relating to north american sporting terminology (baseball, gridiron football) as well as famous computer games (<em>ultima</em>, <em>resident evil</em>) also translate poorly into Swedish (Figure 7). This is clearly an expected result, as Swedes simply revert to using the English terminology when discussing such topics.</p>
<p><em>Figure 7: Sporting/gaming terms that translate poorly to Swedish.</em>
<img alt="Sports cluster" src="../../images/WordVectors/Sports_cluster_v1.png"></p>
<p>Finally, as an Australian, here is my favourite result of all:</p>
<p><em>Figure 8: Archaic professions of the Australian bush</em></p>
<p><img alt="Swagman cluster" src="../../images/WordVectors/Swagman_cluster_v1.png"></p>
<p>Of course, most Swedes will have not the foggiest of what a <em>bushranger</em> or a <em>swagman</em> is. These words are all professions in the Australian outback, in colonial times. A <a href="https://en.wikipedia.org/wiki/Swagman" target="_blank">swagman</a> was someone a bit down on their luck, travelling around the Australian bush looking for work here and there (Figure 9).</p>
<p><em>Figure 9: A swagman</em></p>
<p><img alt="Swagman" src="../../images/WordVectors/swagman.jpg"></p>
<p>The method gets fairly close for "bushranger", coming up with the Swedish word "pirat" (which is equivelant to the English word "pirate"). <a href="https://en.wikipedia.org/wiki/Bushranger" target="_blank">Bushrangers</a> were people hiding in the bush to evade the authorities, occasionally fighting the police (Figure 10).</p>
<p><em>Figure 10: No, Swedes, that's not a Södermalm hipster. It's Ned Kelly, Australia's most famous bushranger, with his home-made suit of armour!</em></p>
<p><img alt="Ned Kelly" src="../../images/WordVectors/Ned_Kelly_in_1880.png"></p>
<h2>Perspectives</h2>
<p>If someone asked me,</p>
<p><em>"What did you find, in your quest for the word vectors?"</em></p>
<p>I would answer:</p>
<p><img alt="illumination" src="../../illumination_subtitled.gif"></p>
<p>The project was a lot of fun and I have learnt some new skills whilst doing it, including how to analyse and visualise word vectors, and implementing the gradient descent using Theano.</p>
<p>I am reasonably confident in the veracity of my findings, with some caveats (see <a href="#appendix">appendix</a>). On the whole, this approach seems to turn up some genuine areas of linguistic expression that are enriched in one language relative to another (in this case English vs Swedish). By inspecting the sets of words enriched in English relative to Swedish, the method seems to produce insights into cultural differences between the English- and Swedish-speaking communities.</p>
<p>Rigorous quantification of something as hard-to-define as human culture has important and beneficial applications.</p>
<p>As for future follow on work. Word vectors are, indeed, very cool. But <a href="https://arxiv.org/abs/1506.06726" target="_blank">thought vectors</a> - are even cooler! The ability to quantify individual thoughts could be a boon to humanity when coupled with good visualisation techniques. They could (for example) be used to augment human's understanding of various topics, granting permanence and elucidating what is otherwise ephemeral and complex.</p>
<p>Thank you for reading!</p>
<p>UPDATE (2023-02-03): This whole blog post is in many ways hopelessly outdated. But in particular I want to make a remark regarding the above "thought vectors": Arguably better terms for this could be "sentence embeddings", "contextualized word embeddings" - the kind of thing you get out of BERT and similar large language models.</p>
<h2>Acknowledgements</h2>
<p>I wish to thank <a href="https://twitter.com/mattiasostmar" target="_blank">Mattias Östmar</a> and <a href="https://twitter.com/mikaelhuss" target="_blank">Mikael Huss</a>, who provided great insights and feedback throughout the project.</p>
<h2>
<a name="appendix"></a>Appendix</h2>
<p>This analysis has all been carried out in my spare time, so I have not approached it from as many angles I perhaps otherwise would do. I believe it is quite rigorous on the whole, but there are some a few caveats that I feel are important to point out.</p>
<p>The first is a general point: this method ultimately reflects differences between the <em>corpora</em> underlying the two sets of word vectors compared. Thus it will only reflect true differences in culture when the corpora are comparable - if I took English wikipedia and compared it against Swedish twitter data, I imagine the results would primarily reflect differences between wikipedia and twitter, rather than Swedish and English. I found it was important to filter word vectors to exclude those that are not true Swedish or English words - otherwise the final results were polluted by gibberish.</p>
<p>Another caveat is the reliance of the final step on what is ultimately a manual interpretation of the results; I looked at the English-enriched word clusters and offered my interpretation based on what I know about the languages and cultures. There are clearly different ways to interpret the same results. Replication of this technique on other corpus and language pairings could determine how robust these findings are.</p>
<p>There are also some obvious artefacts in the final results. For example, several Swedish-depleted English word clusters were actually not English words, but were words from another language (Figure 11).</p>
<p><em>Figure 11: Artefact word clusters - foreign language clusters</em></p>
<p><img alt="Artefact clusters" src="../../images/WordVectors/Language_Artefact_clusters.svg"></p>
<p>Finally, the least-translatable 72 (10% of all) English word clusters also included some results that seem to reflect culture in some way, which didn't fit into the main results section above. Here they are:</p>
<p><em>Figure 12: Additional results of interest</em></p>
<p><img alt="Misc results" src="../../images/WordVectors/Misc_Or_For_Appendix.svg"></p>
<h3><em>Social media:</em></h3>
<p>If you would like to get in touch, here's my social media:</p>
<ul>
<li>LinkedIn: <a href="https://www.linkedin.com/in/tomwhitington">https://www.linkedin.com/in/tomwhitington</a>
</li>
<li>Twitter: <a href="https://twitter.com/Tom_Whitington">@Tom_Whitington</a>
</li>
<li>Mastodon: @tomwhitington@sigmoid.social</li>
</ul>
</div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="next">
                <a href="../multilabel-classification-modified-loss/" rel="next" title="More efficient labelling via a modified loss function">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="https-tomwhi-github-io-blog",
            disqus_url="https://tomwhi.github.io/posts/using-word-vectors-to-decipher-swedish-culture/",
        disqus_title="Using word vectors to decipher Swedish culture",
        disqus_identifier="cache/posts/word-embeddings-swedish-culture.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="https-tomwhi-github-io-blog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2023         <a href="mailto:thomaswhitington@gmail.com">Tom Whitington</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </div>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    
    
    
            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
